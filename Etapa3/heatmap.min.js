"use strict";function simpleheat(t){return this instanceof simpleheat?(this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,void(this._data=[])):new simpleheat(t)}"undefined"!=typeof module&&(module.exports=simpleheat),simpleheat.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,i){i=void 0===i?15:i;var e=this._circle=document.createElement("canvas"),a=e.getContext("2d"),h=this._r=t+i;return e.width=e.height=2*h,a.shadowOffsetX=a.shadowOffsetY=2*h,a.shadowBlur=i,a.shadowColor="black",a.beginPath(),a.arc(-h,-h,t,0,2*Math.PI,!0),a.closePath(),a.fill(),this},resize:function(){this._width=this._canvas.width,this._height=this._canvas.height},gradient:function(t){var i=document.createElement("canvas"),e=i.getContext("2d"),a=e.createLinearGradient(0,0,0,256);i.width=1,i.height=256;for(var h in t)a.addColorStop(h,t[h]);return e.fillStyle=a,e.fillRect(0,0,1,256),this._grad=e.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var i=this._ctx;i.clearRect(0,0,this._width,this._height);for(var e,a=0,h=this._data.length;h>a;a++)e=this._data[a],i.globalAlpha=Math.max(e[2]/this._max,void 0===t?.05:t),i.drawImage(this._circle,e[0]-this._r,e[1]-this._r);var s=i.getImageData(0,0,this._width,this._height);return this._colorize(s.data,this._grad),i.putImageData(s,0,0),this},_colorize:function(t,i){for(var e,a=0,h=t.length;h>a;a+=4)e=4*t[a+3],e&&(t[a]=i[e],t[a+1]=i[e+1],t[a+2]=i[e+2])}};